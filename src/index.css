@import "./styles/tokens.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

html,
body {
  overflow-x: hidden;
  touch-action: pan-y;
}

/* Safe responsive improvements */
@layer utilities {
  /* Device-specific utilities */
  .mobile-only {
    @apply block md:hidden;
  }
  
  .tablet-only {
    @apply hidden sm:block lg:hidden;
  }
  
  .desktop-only {
    @apply hidden lg:block;
  }
  
  .not-mobile {
    @apply hidden sm:block;
  }
  
  /* Safe responsive grid with iPad support */
  .responsive-grid {
    @apply grid gap-3 grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4;
  }
  
  /* Enhanced responsive padding for all devices */
  .responsive-padding {
    @apply p-3 sm:p-4 md:p-5 lg:p-6;
  }
  
  /* iPad-friendly text sizing */
  .responsive-text {
    @apply text-sm sm:text-base md:text-base lg:text-lg;
  }
  
  /* Container utilities for different screen sizes */
  .container-mobile {
    @apply w-full px-4;
  }
  
  .container-tablet {
    @apply w-full max-w-3xl mx-auto px-6;
  }
  
  .container-desktop {
    @apply w-full max-w-6xl mx-auto px-8;
  }
  
  /* Responsive container that adapts */
  .container-responsive {
    @apply container-mobile sm:container-tablet lg:container-desktop;
  }
  
  /* Enhanced borders for better visibility - consistent 1.5px */
  .border-safe {
    @apply border-[1.5px] border-gray-300 dark:border-gray-600;
  }
  
  .card-border {
    @apply border-[1.5px] border-gray-300 dark:border-gray-600 rounded-lg;
  }
  
  .button-border {
    @apply border-[1.5px] border-gray-400 dark:border-gray-500 rounded-md;
  }
  
  /* Strong borders for important elements */
  .border-strong {
    @apply border-[1.5px] border-gray-400 dark:border-gray-500;
  }
  
  .border-accent {
    @apply border-[1.5px] border-orange-300 dark:border-orange-600;
  }
}

/* Enhanced dialog responsive styles */
@layer components {
  /* Universal dialog base - safe for all components */
  .dialog-responsive {
    @apply max-h-[85vh] sm:max-h-[80vh] overflow-y-auto overflow-x-hidden py-4 px-12 sm:px-16;
  }
  
  /* Global dialog container with better iPad support */
  .dialog-content {
    @apply my-8 max-w-lg w-full px-4;
  }
  
  /* Mobile phones (up to 640px) */
  @media (max-width: 640px) {
    .dialog-content {
      @apply my-4 max-w-none px-3;
    }
    
    .dialog-responsive {
      @apply max-h-[95vh] p-4;
    }
  }
  
  /* iPad Portrait & small tablets (641px - 768px) */
  @media (min-width: 641px) and (max-width: 768px) {
    .dialog-content {
      @apply my-8 max-w-xl px-8;
    }
    
    .dialog-responsive {
      @apply max-h-[85vh] p-6;
    }
  }
  
  /* iPad Landscape & medium tablets (769px - 1024px) */
  @media (min-width: 769px) and (max-width: 1024px) {
    .dialog-content {
      @apply my-8 max-w-2xl px-12;
    }
    
    .dialog-responsive {
      @apply max-h-[80vh] p-6;
    }
  }
  
  /* Desktop (1025px+) */
  @media (min-width: 1025px) {
    .dialog-content {
      @apply my-8 max-w-3xl px-0;
    }
    
    .dialog-responsive {
      @apply max-h-[85vh] sm:max-h-[80vh] p-4 sm:p-6 md:p-8;
    }
  }
  
  /* Modal wrapper with iPad optimization */
  .modal-wrapper {
    @apply p-4 sm:p-5 md:p-6 lg:p-8;
  }
  
  /* Form dialog with enhanced iPad support */
  .form-dialog {
    @apply bg-white border border-gray-200 rounded-xl shadow-xl px-12 sm:px-16;
    max-width: 500px;
    width: 100%;
  }
  
  @media (max-width: 640px) {
    .form-dialog {
      @apply max-w-none p-3;
    }
  }
  
  @media (min-width: 641px) and (max-width: 768px) {
    .form-dialog {
      @apply max-w-lg p-5;
    }
  }
  
  @media (min-width: 769px) and (max-width: 1024px) {
    .form-dialog {
      @apply max-w-xl p-6;
    }
  }
  
  /* Large form dialogs for complex forms */
  .form-dialog-large {
    @apply bg-white border border-gray-200 rounded-xl shadow-xl px-12 sm:px-16;
    max-width: 800px;
    width: 100%;
  }
  
  @media (max-width: 640px) {
    .form-dialog-large {
      @apply max-w-none p-3;
    }
  }
  
  @media (min-width: 641px) and (max-width: 768px) {
    .form-dialog-large {
      @apply max-w-2xl p-5;
    }
  }
  
  @media (min-width: 769px) and (max-width: 1024px) {
    .form-dialog-large {
      @apply max-w-3xl p-6;
    }
  }
  
  @media (min-width: 1025px) {
    .form-dialog-large {
      @apply max-w-4xl p-8;
    }
  }
  
  /* Card responsive utilities */
  .card-responsive {
    @apply w-full;
  }
  
  .card-stats {
    @apply p-3 sm:p-4 md:p-5 lg:p-6;
  }
  
  .card-content-responsive {
    @apply p-3 sm:p-4 md:p-5;
  }
  
  .card-header-responsive {
    @apply px-3 py-2 sm:px-4 sm:py-3 md:px-5 md:py-4;
  }
  
  /* Card text and number responsive sizing */
  .card-title-responsive {
    @apply text-sm sm:text-base md:text-lg font-semibold;
  }
  
  .card-value-responsive {
    @apply text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold;
  }
  
  .card-label-responsive {
    @apply text-xs sm:text-sm text-gray-600;
  }
  
  .card-description-responsive {
    @apply text-xs sm:text-sm text-gray-500;
  }
  
  /* Icon sizing in cards */
  .card-icon-responsive {
    @apply w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6;
  }
  
  .card-icon-container-responsive {
    @apply w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-lg flex items-center justify-center;
  }
  
  /* Stats grid responsive - optimized for iPad */
  .stats-grid-responsive {
    @apply grid gap-3 sm:gap-4 md:gap-4 lg:gap-6;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  }
  
  /* Mobile phones (up to 640px): 1 column */
  @media (max-width: 640px) {
    .stats-grid-responsive {
      @apply grid-cols-1 gap-3;
      grid-template-columns: 1fr;
    }
  }
  
  /* iPad Portrait (641px - 768px): 2 columns */
  @media (min-width: 641px) and (max-width: 768px) {
    .stats-grid-responsive {
      @apply grid-cols-2 gap-3;
      grid-template-columns: repeat(2, 1fr);
    }
  }
  
  /* iPad Landscape (769px - 1024px): 2 columns with more space */
  @media (min-width: 769px) and (max-width: 1024px) {
    .stats-grid-responsive {
      @apply grid-cols-2 gap-4;
      grid-template-columns: repeat(2, minmax(250px, 1fr));
    }
  }
  
  /* Small Desktop (1025px - 1280px): 3 columns */
  @media (min-width: 1025px) and (max-width: 1280px) {
    .stats-grid-responsive {
      @apply grid-cols-3 gap-5;
      grid-template-columns: repeat(3, 1fr);
    }
  }
  
  /* Large Desktop (1281px+): 4 columns */
  @media (min-width: 1281px) {
    .stats-grid-responsive {
      @apply grid-cols-4 gap-6;
      grid-template-columns: repeat(4, 1fr);
    }
  }
  
  /* Header responsive utilities */
  .header-responsive {
    @apply px-4 py-3 sm:px-6 sm:py-4 md:px-8 md:py-5;
  }
  
  .header-title-responsive {
    @apply text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold;
  }
  
  .header-subtitle-responsive {
    @apply text-sm sm:text-base text-gray-600;
  }
  
  /* Button group responsive */
  .button-group-responsive {
    @apply flex flex-wrap gap-2 sm:gap-3 md:gap-4;
  }
  
  /* Prevent number/text overflow in cards */
  .text-overflow-safe {
    @apply break-words overflow-hidden;
    word-wrap: break-word;
    overflow-wrap: break-word;
  }
  
  /* iPad sidebar behavior */
  .sidebar-ipad-overlay {
    z-index: 50;
    position: fixed;
    background: rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(2px);
  }
  
  .sidebar-ipad-default-collapsed {
    /* Default collapsed state for iPad */
    width: var(--sidebar-width-icon);
  }
  
  .sidebar-ipad-overlay-expanded {
    /* Overlay mode when expanded on iPad */
    position: fixed;
    z-index: 60;
    left: 0;
    top: 0;
    height: 100vh;
    width: var(--sidebar-width);
    background: white;
    border-right: 1px solid theme('colors.border');
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
  }
  
  /* iPad content shift prevention */
  @media (min-width: 641px) and (max-width: 1024px) {
    .sidebar-content-no-shift {
      margin-left: 0 !important;
      padding-left: 0 !important;
      transition: none !important;
    }
    
    .sidebar-overlay-backdrop {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.3);
      z-index: 55;
      backdrop-filter: blur(2px);
    }
  }
}

